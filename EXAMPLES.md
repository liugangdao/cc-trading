# ä½¿ç”¨ç¤ºä¾‹

æœ¬æ–‡æ¡£æä¾›å®é™…çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹äº¤æ˜“æ—¥å¿—CLIç³»ç»Ÿã€‚

## åœºæ™¯1ï¼šè®°å½•BTCå¤šå¤´äº¤æ˜“

### å¼€ä»“

```bash
$ ./trading-cli open

ğŸ“Š å¼€ä»“è®°å½•

? äº¤æ˜“å“ç§ (å¦‚ BTC/USDT): BTC/USDT
? å¸‚åœºç±»å‹: crypto
? æ–¹å‘: long
? å¼€ä»“ä»·æ ¼: 42500
? ä»“ä½å¤§å°: 0.5
? æ­¢æŸä»·æ ¼ (å¿…å¡«): 41000
? æ­¢ç›ˆä»·æ ¼ (å¿…å¡«): 45000
? ä¿è¯é‡‘/æˆæœ¬: 5000
? äº¤æ˜“ç†ç”± (å¯é€‰): çªç ´å…³é”®é˜»åŠ›ä½ï¼ŒRSIè¶…å–åå¼¹
? ä½¿ç”¨å½“å‰æ—¶é—´? Yes

âœ“ ä»“ä½å·²è®°å½•: 20250120-143022-A7B3
  å“ç§: BTC/USDT (crypto)
  æ–¹å‘: long
  å¼€ä»“ä»·æ ¼: 42500.0000
  ä»“ä½å¤§å°: 0.5000
  æ­¢æŸ: 41000.0000
  æ­¢ç›ˆ: 45000.0000
  ä¿è¯é‡‘: 5000.00
  ç†ç”±: çªç ´å…³é”®é˜»åŠ›ä½ï¼ŒRSIè¶…å–åå¼¹
```

### å¹³ä»“ï¼ˆæ­¢ç›ˆï¼‰

```bash
$ ./trading-cli close

ğŸ“‰ å¹³ä»“è®°å½•

æœªå¹³ä»“ä½:
1. [20250120-143022-A7B3] BTC/USDT (long) @ 42500.0000

? é€‰æ‹©è¦å¹³ä»“çš„ä»“ä½: 1

é€‰ä¸­ä»“ä½: 20250120-143022-A7B3
å“ç§: BTC/USDT, æ–¹å‘: long, å¼€ä»“ä»·: 42500.0000, æ•°é‡: 0.5000

? å¹³ä»“ä»·æ ¼: 44200
? å¹³ä»“æ•°é‡ (æœ€å¤§ 0.5000): 0.5000
? å¹³ä»“åŸå› : take_profit
? å¹³ä»“å¤‡æ³¨ (å¯é€‰): è¾¾åˆ°æ­¢ç›ˆç›®æ ‡
? ä½¿ç”¨å½“å‰æ—¶é—´? Yes

âœ“ ä»“ä½å·²å¹³ä»“: 20250120-143022-A7B3
  å¹³ä»“ä»·æ ¼: 44200.0000
  å¹³ä»“æ•°é‡: 0.5000
  ç›ˆäº: +850.00 (+17.00%)
  æŒä»“æ—¶é•¿: 19h 45m
  å¤‡æ³¨: è¾¾åˆ°æ­¢ç›ˆç›®æ ‡
```

## åœºæ™¯2ï¼šå¤–æ±‡EUR/USDç©ºå¤´äº¤æ˜“ï¼ˆæ­¢æŸï¼‰

### å¼€ä»“

```bash
$ ./trading-cli open

ğŸ“Š å¼€ä»“è®°å½•

? äº¤æ˜“å“ç§ (å¦‚ BTC/USDT): EUR/USD
? å¸‚åœºç±»å‹: forex
? æ–¹å‘: short
? å¼€ä»“ä»·æ ¼: 1.0850
? ä»“ä½å¤§å°: 10000
? æ­¢æŸä»·æ ¼ (å¿…å¡«): 1.0920
? æ­¢ç›ˆä»·æ ¼ (å¿…å¡«): 1.0750
? ä¿è¯é‡‘/æˆæœ¬: 2000
? äº¤æ˜“ç†ç”± (å¯é€‰): ç¾è”å‚¨é¹°æ´¾ç«‹åœºï¼ŒæŠ€æœ¯é¢ç©ºå¤´æ’åˆ—
? ä½¿ç”¨å½“å‰æ—¶é—´? Yes

âœ“ ä»“ä½å·²è®°å½•: 20250121-093530-B2C4
```

### å¹³ä»“ï¼ˆæ­¢æŸï¼‰

```bash
$ ./trading-cli close

ğŸ“‰ å¹³ä»“è®°å½•

æœªå¹³ä»“ä½:
1. [20250121-093530-B2C4] EUR/USD (short) @ 1.0850

? é€‰æ‹©è¦å¹³ä»“çš„ä»“ä½: 1

é€‰ä¸­ä»“ä½: 20250121-093530-B2C4
å“ç§: EUR/USD, æ–¹å‘: short, å¼€ä»“ä»·: 1.0850, æ•°é‡: 10000.0000

? å¹³ä»“ä»·æ ¼: 1.0918
? å¹³ä»“æ•°é‡ (æœ€å¤§ 10000.0000): 10000.0000
? å¹³ä»“åŸå› : stop_loss
? å¹³ä»“å¤‡æ³¨ (å¯é€‰): çªç ´å…³é”®æ”¯æ’‘ä½ï¼Œæ­¢æŸç¦»åœº
? ä½¿ç”¨å½“å‰æ—¶é—´? Yes

âœ“ ä»“ä½å·²å¹³ä»“: 20250121-093530-B2C4
  å¹³ä»“ä»·æ ¼: 1.0918
  å¹³ä»“æ•°é‡: 10000.0000
  ç›ˆäº: -68.00 (-3.40%)
  æŒä»“æ—¶é•¿: 2h 15m
  å¤‡æ³¨: çªç ´å…³é”®æ”¯æ’‘ä½ï¼Œæ­¢æŸç¦»åœº
```

## åœºæ™¯3ï¼šé»„é‡‘éƒ¨åˆ†å¹³ä»“

### å¼€ä»“

```bash
$ ./trading-cli open

? äº¤æ˜“å“ç§ (å¦‚ BTC/USDT): XAUUSD
? å¸‚åœºç±»å‹: gold
? æ–¹å‘: long
? å¼€ä»“ä»·æ ¼: 2050
? ä»“ä½å¤§å°: 2
? æ­¢æŸä»·æ ¼ (å¿…å¡«): 2030
? æ­¢ç›ˆä»·æ ¼ (å¿…å¡«): 2100
? ä¿è¯é‡‘/æˆæœ¬: 4000
? äº¤æ˜“ç†ç”± (å¯é€‰): é¿é™©æƒ…ç»ªå‡æ¸©ï¼Œçªç ´ç›˜æ•´åŒºé—´
? ä½¿ç”¨å½“å‰æ—¶é—´? Yes

âœ“ ä»“ä½å·²è®°å½•: 20250122-140500-C3D5
```

### éƒ¨åˆ†å¹³ä»“ï¼ˆå…ˆå¹³ä¸€åŠï¼‰

```bash
$ ./trading-cli close

? é€‰æ‹©è¦å¹³ä»“çš„ä»“ä½: 1

é€‰ä¸­ä»“ä½: 20250122-140500-C3D5
å“ç§: XAUUSD, æ–¹å‘: long, å¼€ä»“ä»·: 2050.0000, æ•°é‡: 2.0000

? å¹³ä»“ä»·æ ¼: 2075
? å¹³ä»“æ•°é‡ (æœ€å¤§ 2.0000): 1.0
? å¹³ä»“åŸå› : manual
? å¹³ä»“å¤‡æ³¨ (å¯é€‰): éƒ¨åˆ†æ­¢ç›ˆï¼Œä¿ç•™åº•ä»“
? ä½¿ç”¨å½“å‰æ—¶é—´? Yes

âœ“ ä»“ä½å·²å¹³ä»“: 20250122-140500-C3D5
  å¹³ä»“ä»·æ ¼: 2075.0000
  å¹³ä»“æ•°é‡: 1.0000
  ç›ˆäº: +25.00 (+0.63%)
  æŒä»“æ—¶é•¿: 3h 30m
  å¤‡æ³¨: éƒ¨åˆ†æ­¢ç›ˆï¼Œä¿ç•™åº•ä»“
```

## åœºæ™¯4ï¼šæŸ¥è¯¢å’Œç­›é€‰

### æŸ¥çœ‹æ‰€æœ‰æœªå¹³ä»“ä½

```bash
$ ./trading-cli list --status open

ID                Symbol      Market  Direction  Open Price  Quantity  Status  PnL
---               ---         ---     ---        ---         ---       ---     ---
20250122-14050... XAUUSD      gold    long       2050.0000   1.0000    open    -
```

### æŸ¥çœ‹æœ¬æœˆæ‰€æœ‰å·²å¹³ä»“äº¤æ˜“

```bash
$ ./trading-cli list --status closed --from 2025-01-01 --to 2025-01-31

ID                Symbol      Market  Direction  Open Price  Quantity  Status  PnL
---               ---         ---     ---        ---         ---       ---     ---
20250120-14302... BTC/USDT    crypto  long       42500.0000  0.5000    closed  +850.00 (+17.00%)
20250121-09353... EUR/USD     forex   short      1.0850      10000.00  closed  -68.00 (-3.40%)
20250122-14050... XAUUSD      gold    long       2050.0000   1.0000    closed  +25.00 (+0.63%)
```

### åªæŸ¥çœ‹åŠ å¯†è´§å¸äº¤æ˜“

```bash
$ ./trading-cli list --market crypto --format json

[
  {
    "positionId": "20250120-143022-A7B3",
    "symbol": "BTC/USDT",
    "marketType": "crypto",
    "openTime": "2025-01-20T14:30:22Z",
    "direction": "long",
    "openPrice": 42500.00,
    ...
  }
]
```

### æŸ¥çœ‹ç‰¹å®šå“ç§çš„æ‰€æœ‰äº¤æ˜“

```bash
$ ./trading-cli list --symbol BTC/USDT
```

## åœºæ™¯5ï¼šä½¿ç”¨Claude Codeè¿›è¡Œåˆ†æ

### é£é™©è¯„ä¼°

åœ¨Claude Codeä¸­ï¼Œå¤åˆ¶ `prompts/risk-assessment.md` çš„å†…å®¹ï¼Œæˆ–ç›´æ¥è¯¢é—®ï¼š

```
è¯·åˆ†ææˆ‘å½“å‰çš„æŒä»“é£é™©ã€‚è¯»å–trading-dataç›®å½•ä¸­çš„æ•°æ®ï¼Œè®¡ç®—ï¼š
1. æ€»ä¿è¯é‡‘å’Œæœ€å¤§å¯èƒ½æŸå¤±
2. æ¯ä¸ªä»“ä½çš„é£é™©å›æŠ¥æ¯”
3. ä»“ä½é›†ä¸­åº¦ï¼ˆæŒ‰å“ç§å’Œå¸‚åœºç±»å‹ï¼‰
4. é£é™©é¢„è­¦
```

Claude Codeä¼šè‡ªåŠ¨è¯»å–æ•°æ®å¹¶æä¾›è¯¦ç»†çš„é£é™©åˆ†ææŠ¥å‘Šã€‚

### äº¤æ˜“è¡¨ç°ä¼˜åŒ–

åœ¨Claude Codeä¸­è¯¢é—®ï¼š

```
åˆ†ææˆ‘è¿‡å»ä¸€ä¸ªæœˆçš„äº¤æ˜“è¡¨ç°ï¼ŒåŒ…æ‹¬ï¼š
1. èƒœç‡å’Œå¹³å‡ç›ˆäºæ¯”
2. è¡¨ç°æœ€å¥½å’Œæœ€å·®çš„å“ç§
3. æ­¢æŸæ­¢ç›ˆçš„æœ‰æ•ˆæ€§
4. æŒä»“æ—¶é•¿ä¸ç›ˆäºçš„å…³ç³»
5. ç»™å‡ºå…·ä½“çš„ä¼˜åŒ–å»ºè®®
```

### è‡ªå®šä¹‰é—®é¢˜

ä½ ä¹Ÿå¯ä»¥ç›´æ¥æé—®ä»»ä½•é—®é¢˜ï¼š

- "æˆ‘åœ¨BTC/USDTä¸Šçš„å¹³å‡ç›ˆäºæ˜¯å¤šå°‘ï¼Ÿ"
- "æ¯”è¾ƒæˆ‘åœ¨åŠ å¯†è´§å¸å’Œå¤–æ±‡å¸‚åœºçš„è¡¨ç°å·®å¼‚"
- "ç»Ÿè®¡æˆ‘è§¦å‘æ­¢æŸå’Œæ­¢ç›ˆçš„æ¯”ä¾‹"
- "æ‰¾å‡ºæˆ‘æœ€å¸¸çŠ¯çš„äº¤æ˜“é”™è¯¯"

## æ•°æ®å¤‡ä»½

å®šæœŸå¤‡ä»½äº¤æ˜“æ•°æ®ï¼š

```bash
# Linux/Mac
cp -r trading-data/ backup/trading-data-$(date +%Y%m%d)/

# Windows
xcopy trading-data backup\trading-data-%date:~0,4%%date:~5,2%%date:~8,2%\ /E /I
```

## è¿ç§»åˆ°æ–°è®¾å¤‡

1. å¤åˆ¶ `trading-data/` ç›®å½•åˆ°æ–°è®¾å¤‡
2. å¤åˆ¶ç¼–è¯‘å¥½çš„ `trading-cli` å¯æ‰§è¡Œæ–‡ä»¶
3. è¿è¡Œ `./trading-cli list` éªŒè¯æ•°æ®å®Œæ•´æ€§

## é«˜çº§æŠ€å·§

### è‡ªå®šä¹‰æ•°æ®ç›®å½•

```bash
./trading-cli --data-dir /path/to/custom/data open
```

### æ‰¹é‡å¯¼å‡ºä¸ºJSON

```bash
./trading-cli list --status all --format json > all-trades.json
```

### ä½¿ç”¨ç®¡é“å’Œjqå¤„ç†

```bash
# ç»Ÿè®¡æ€»ç›ˆäº
./trading-cli list --status closed --format json | jq '[.[].realizedPnL] | add'

# æ‰¾å‡ºæœ€å¤§ç›ˆåˆ©äº¤æ˜“
./trading-cli list --status closed --format json | jq 'max_by(.realizedPnL)'
```
